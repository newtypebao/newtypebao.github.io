---
layout: post
title: 关于struts2在做下载时，execute()方法会执行两次 
date: 2011-08-24 
tag: java
---

项目里有个功能在下载功能中加入日志，也就是希望把用户下载的情况写入数据库记录下来。


可是实践发现点下载文件被保存后，重复执行了两次action中的execute()

并且貌似不是很稳定有时数据库记录了一条记录 有时记录了两条。。比较郁闷。。

经过排查发现记录了一条记录的那次保存 也是因为报了个异常，然后由于某些原因，导致第二次没有正确保存，其实action实际上还是保存了两次。

后来网上查了下貌似别人也有遇到这个问题的，最后发现原因：

<font color=red>**其实这个原因是浏览器引起的，你换成IE浏览器或FireFox浏览器做测试，就不会有这个问题。**</font>

我们当时用的是360安全浏览器，导致的这个情况。后来使用IE以及FireFox发现并无此问题。

**看来360浏览器还是有点问题啊。。**

